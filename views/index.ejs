<!DOCTYPE html>
<html lang="en">
  <%- include("./partials/head.ejs") %>
  <body>
    <%- include("./partials/header.ejs") %>
    <div class="container">
      <div class="button-helper">
        <h1>Messages</h1>
        <a href="/new" class="btn nav-btn">Add a new message</a>
      </div>
      <div class="messageContainer">
        <ul>
          <% messages.slice().reverse().forEach((message, index) => { %> <%
          const messageIndex = messages.length - index - 1; %>

          <li>
            <div class="message-content">
              <div>
                <strong><%= message.username %>:</strong> <%= message.text %>
              </div>
              <div>
                <small>About <%= moment(message.created_at).fromNow() %></small>
                <a href="/details/<%= messageIndex %>" class="btn">Open</a>
              </div>
            </div>
          </li>
          <% }) %>
        </ul>
      </div>
    </div>

    <%- include("./partials/footer.ejs") %>
  </body>
</html>
